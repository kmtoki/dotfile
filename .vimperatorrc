
""" .Vimperatorrc

"" General
set gui=none

colorscheme concise

set focuscontent
set hintchars=hjklasdfgyuiopqwertnmzxcvb
set complete=sl
set hlsearch=false

set statuslinevisibility=visible
set status=input,history,tabcount,bookmark,position

"" Key Maps
noremap j 2j
noremap k 2k
noremap d 10j
noremap u 10k
noremap x d
noremap X u
noremap <M-x> :undo<Space>
noremap J gT
noremap K gt

noremap a <Nop>
noremap A <Nop>

noremap <C-h> :tabmove! -1<CR>
noremap <C-l> :tabmove! +1<CR>

cnoremap <C-n> <Tab>
cnoremap <C-p> <S-Tab>

vnoremap P y<Esc><Esc>P

noremap s :tabopen<Space>google<Space>
noremap S :open<Space>google<Space>

noremap w :tabopen<Space>wikipedia<Space>
noremap W :open<Space>wikipedia<Space>

noremap <C-r> :source<Space>~/.vimperatorrc<CR>:echo "reload .vimperatorrc"<CR>

" toggle css
noremap ! :set invum<CR>


"" Qmark
qmark m https://mail.google.com
qmark f http://www.feedly.com
qmark n http://www.nicovideo.jp/my/top
qmark h http://www.hulu.jp
qmark y https://www.youtube.com
qmark r http://radiko.jp
qmark x http://www.netflix.com
qmark g https://github.com
qmark q http://qiita.com

"" Ignore URL
ignorekeys add mail\\.google\\.com
ignorekeys add feedly\\.com


"" Plugin
" plugin_loader
let g:plugin_loader_roots = "~/.vimperator/vimperator-plugins/"
let g:plugin_loader_plugins = ""

" hatena bookmark
js <<EOF
commands.addUserCommand(
  ["hatebu"],
  "hatena bookmark view", 
  function (arg) {
    var url = 'http://b.hatena.ne.jp/entry/' + encodeURIComponent(buffer.URL);
    liberator.open(url, null);
  },
  {},
  false
);

commands.addUserCommand(
  ["feedly"],
  "add rss to feedly", 
  function (arg) {
    var d = document;
    var el = d.getElementsByTagName('link');
    var g = false;
    var h;
    for (var i = 0; i < el.length; i++) {
      if (el[i].getAttribute('rel').indexOf('alternate') != -1) {
        var ty = el[i].getAttribute('type');
        if (ty.indexOf('application/rss+xml') != -1 
            || ty.indexOf('text/xml') != -1) {
          g = true;
          h = el[i].getAttribute('href');
          break;
        }
      }
    }
    if (g) {
      var url = 'http://cloud.feedly.com/#subscription'
        + encodeURIComponent('/feed/')
        + encodeURIComponent(h);
      liberator.open(url, null);
    }
    else {
      echo "not found rss."
    }
  },
  {},
  false
);
EOF

echo "Done loading .vimperatorrc"
